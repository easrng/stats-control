// Create a class for the element
let overrideDNT = localStorage.getItem("overrideDNT"), beaconURL=undefined, site;
class Stats extends HTMLElement {
  constructor() {
    super();
    const shadow = this.attachShadow({ mode: "open" });
    if (overrideDNT == null && navigator.doNotTrack == "1") {
      shadow.innerHTML=`<style>.cleanslate,.cleanslate a,.cleanslate abbr,.cleanslate abbr,.cleanslate acronym,.cleanslate address,.cleanslate address,.cleanslate applet,.cleanslate area,.cleanslate article,.cleanslate aside,.cleanslate audio,.cleanslate b,.cleanslate big,.cleanslate blockquote,.cleanslate blockquote,.cleanslate button,.cleanslate canvas,.cleanslate caption,.cleanslate caption,.cleanslate cite,.cleanslate cite,.cleanslate code,.cleanslate code,.cleanslate col,.cleanslate colgroup,.cleanslate datalist,.cleanslate dd,.cleanslate del,.cleanslate dfn,.cleanslate div,.cleanslate dl,.cleanslate dt,.cleanslate em,.cleanslate fieldset,.cleanslate fieldset,.cleanslate figcaption,.cleanslate figure,.cleanslate footer,.cleanslate form,.cleanslate h1,.cleanslate h2,.cleanslate h3,.cleanslate h4,.cleanslate h5,.cleanslate h6,.cleanslate header,.cleanslate hr,.cleanslate i,.cleanslate iframe,.cleanslate img,.cleanslate input,.cleanslate ins,.cleanslate kbd,.cleanslate label,.cleanslate legend,.cleanslate li,.cleanslate li,.cleanslate main,.cleanslate map,.cleanslate mark,.cleanslate menu,.cleanslate meta,.cleanslate nav,.cleanslate object,.cleanslate ol,.cleanslate optgroup,.cleanslate option,.cleanslate output,.cleanslate p,.cleanslate pre,.cleanslate progress,.cleanslate q,.cleanslate samp,.cleanslate section,.cleanslate select,.cleanslate small,.cleanslate span,.cleanslate strike,.cleanslate strong,.cleanslate sub,.cleanslate summary,.cleanslate sup,.cleanslate svg,.cleanslate table,.cleanslate tbody,.cleanslate td,.cleanslate textarea,.cleanslate tfoot,.cleanslate th,.cleanslate thead,.cleanslate time,.cleanslate tr,.cleanslate tt,.cleanslate ul,.cleanslate var,.cleanslate video{background-attachment:scroll !important;background-color:transparent !important;background-image:none !important;background-position:0 0 !important;background-repeat:repeat !important;border-color:black !important;border-color:currentColor !important;border-radius:0 !important;border-style:none !important;border-width:medium !important;bottom:auto !important;clear:none !important;clip:auto !important;color:inherit !important;counter-increment:none !important;counter-reset:none !important;cursor:auto !important;direction:inherit !important;display:inline !important;float:none !important;font-family:inherit !important;font-size:inherit !important;font-style:inherit !important;font-variant:normal !important;font-weight:inherit !important;height:auto !important;left:auto !important;letter-spacing:normal !important;line-height:inherit !important;list-style-type:inherit !important;list-style-position:outside !important;list-style-image:none !important;margin:0 !important;max-height:none !important;max-width:none !important;min-height:0 !important;min-width:0 !important;opacity:1;outline:invert none medium !important;overflow:visible !important;padding:0 !important;position:static !important;quotes:"" "" !important;right:auto !important;table-layout:auto !important;text-align:inherit !important;text-decoration:inherit !important;text-indent:0 !important;text-transform:none !important;top:auto !important;unicode-bidi:normal !important;vertical-align:baseline !important;visibility:inherit !important;white-space:normal !important;width:auto !important;word-spacing:normal !important;z-index:auto !important;-webkit-background-origin:padding-box !important;background-origin:padding-box !important;-webkit-background-clip:border-box !important;background-clip:border-box !important;-webkit-background-size:auto !important;-moz-background-size:auto !important;background-size:auto !important;-webkit-border-image:none !important;-moz-border-image:none !important;-o-border-image:none !important;border-image:none !important;-webkit-border-radius:0 !important;-moz-border-radius:0 !important;border-radius:0 !important;-webkit-box-shadow:none !important;box-shadow:none !important;-webkit-box-sizing:content-box !important;-moz-box-sizing:content-box !important;box-sizing:content-box !important;-webkit-column-count:auto !important;-moz-column-count:auto !important;column-count:auto !important;-webkit-column-gap:normal !important;-moz-column-gap:normal !important;column-gap:normal !important;-webkit-column-rule:medium none black !important;-moz-column-rule:medium none black !important;column-rule:medium none black !important;-webkit-column-span:1 !important;-moz-column-span:1 !important;column-span:1 !important;-webkit-column-width:auto !important;-moz-column-width:auto !important;column-width:auto !important;font-feature-settings:normal !important;overflow-x:visible !important;overflow-y:visible !important;-webkit-hyphens:manual !important;-moz-hyphens:manual !important;hyphens:manual !important;-webkit-perspective:none !important;-moz-perspective:none !important;-ms-perspective:none !important;-o-perspective:none !important;perspective:none !important;-webkit-perspective-origin:50% 50% !important;-moz-perspective-origin:50% 50% !important;-ms-perspective-origin:50% 50% !important;-o-perspective-origin:50% 50% !important;perspective-origin:50% 50% !important;-webkit-backface-visibility:visible !important;-moz-backface-visibility:visible !important;-ms-backface-visibility:visible !important;-o-backface-visibility:visible !important;backface-visibility:visible !important;text-shadow:none !important;-webkit-transition:all 0s ease 0s !important;transition:all 0s ease 0s !important;-webkit-transform:none !important;-moz-transform:none !important;-ms-transform:none !important;-o-transform:none !important;transform:none !important;-webkit-transform-origin:50% 50% !important;-moz-transform-origin:50% 50% !important;-ms-transform-origin:50% 50% !important;-o-transform-origin:50% 50% !important;transform-origin:50% 50% !important;-webkit-transform-style:flat !important;-moz-transform-style:flat !important;-ms-transform-style:flat !important;-o-transform-style:flat !important;transform-style:flat !important;word-break:normal !important}.cleanslate,.cleanslate address,.cleanslate address,.cleanslate article,.cleanslate audio,.cleanslate blockquote,.cleanslate blockquote,.cleanslate caption,.cleanslate colgroup,.cleanslate dd,.cleanslate dialog,.cleanslate div,.cleanslate dl,.cleanslate dt,.cleanslate fieldset,.cleanslate figure,.cleanslate footer,.cleanslate form,.cleanslate h1,.cleanslate h2,.cleanslate h3,.cleanslate h4,.cleanslate h5,.cleanslate h6,.cleanslate header,.cleanslate hgroup,.cleanslate hr,.cleanslate main,.cleanslate menu,.cleanslate nav,.cleanslate ol,.cleanslate option,.cleanslate p,.cleanslate pre,.cleanslate progress,.cleanslate section,.cleanslate summary,.cleanslate ul,.cleanslate video{display:block !important}.cleanslate h1,.cleanslate h2,.cleanslate h3,.cleanslate h4,.cleanslate h5,.cleanslate h6{font-weight:bold !important}.cleanslate h1{font-size:2em !important;padding:0.67em 0 !important}.cleanslate h2{font-size:1.5em !important;padding:0.83em 0 !important}.cleanslate h3{font-size:1.17em !important;padding:0.83em 0 !important}.cleanslate h4{font-size:1em !important}.cleanslate h5{font-size:0.83em !important}.cleanslate p{margin:1em 0 !important}.cleanslate table{display:table !important}.cleanslate thead{display:table-header-group !important}.cleanslate tbody{display:table-row-group !important}.cleanslate tfoot{display:table-footer-group !important}.cleanslate tr{display:table-row !important}.cleanslate td,.cleanslate th{display:table-cell !important;padding:2px !important}.cleanslate ol,.cleanslate ul{margin:1em 0 !important}.cleanslate ol li,.cleanslate ol ol li,.cleanslate ol ol ol li,.cleanslate ol ol ul li,.cleanslate ol ul ul li,.cleanslate ul li,.cleanslate ul ol ol li,.cleanslate ul ul li,.cleanslate ul ul ol li,.cleanslate ul ul ul li{list-style-position:inside !important;margin-top:0.08em !important}.cleanslate ol ol,.cleanslate ol ol ol,.cleanslate ol ol ul,.cleanslate ol ul,.cleanslate ol ul ul,.cleanslate ul ol,.cleanslate ul ol ol,.cleanslate ul ul,.cleanslate ul ul ol,.cleanslate ul ul ul{padding-left:40px !important;margin:0 !important}.cleanslate nav ol,.cleanslate nav ul{list-style-type:none !important}.cleanslate menu,.cleanslate ul{list-style-type:disc !important}.cleanslate ol{list-style-type:decimal !important}.cleanslate menu menu,.cleanslate menu ul,.cleanslate ol menu,.cleanslate ol ul,.cleanslate ul menu,.cleanslate ul ul{list-style-type:circle !important}.cleanslate menu menu menu,.cleanslate menu menu ul,.cleanslate menu ol menu,.cleanslate menu ol ul,.cleanslate menu ul menu,.cleanslate menu ul ul,.cleanslate ol menu menu,.cleanslate ol menu ul,.cleanslate ol ol menu,.cleanslate ol ol ul,.cleanslate ol ul menu,.cleanslate ol ul ul,.cleanslate ul menu menu,.cleanslate ul menu ul,.cleanslate ul ol menu,.cleanslate ul ol ul,.cleanslate ul ul menu,.cleanslate ul ul ul{list-style-type:square !important}.cleanslate li{display:list-item !important;min-height:auto !important;min-width:auto !important;padding-left:20px !important}.cleanslate strong{font-weight:bold !important}.cleanslate em{font-style:italic !important}.cleanslate code,.cleanslate kbd,.cleanslate pre,.cleanslate samp{font-family:monospace !important}.cleanslate a{color:blue !important;text-decoration:underline !important}.cleanslate a:visited{color:#529 !important}.cleanslate a,.cleanslate a *,.cleanslate button,.cleanslate input[type=button],.cleanslate input[type=checkbox],.cleanslate input[type=radio],.cleanslate input[type=submit],.cleanslate select{cursor:pointer !important}.cleanslate button,.cleanslate input[type=submit]{text-align:center !important;padding:2px 6px 3px !important;border-radius:4px !important;text-decoration:none !important;font-family:arial, helvetica, sans-serif !important;font-size:small !important;background:white !important;-webkit-appearance:push-button !important;color:buttontext !important;border:1px #a6a6a6 solid !important;background:lightgrey !important;background:rgb(255,255,255);background:-moz-linear-gradient(top, rgba(255,255,255,1) 0%, rgba(221,221,221,1) 100%, rgba(209,209,209,1) 100%, rgba(221,221,221,1) 100%) !important;background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,1)), color-stop(100%,rgba(221,221,221,1)), color-stop(100%,rgba(209,209,209,1)), color-stop(100%,rgba(221,221,221,1))) !important;background:-webkit-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(221,221,221,1) 100%,rgba(209,209,209,1) 100%,rgba(221,221,221,1) 100%) !important;background:-o-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(221,221,221,1) 100%,rgba(209,209,209,1) 100%,rgba(221,221,221,1) 100%) !important;background:-ms-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(221,221,221,1) 100%,rgba(209,209,209,1) 100%,rgba(221,221,221,1) 100%) !important;background:linear-gradient(to bottom, rgba(255,255,255,1) 0%,rgba(221,221,221,1) 100%,rgba(209,209,209,1) 100%,rgba(221,221,221,1) 100%) !important;filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#dddddd',GradientType=0 ) !important;-webkit-box-shadow:1px 1px 0 #eee !important;-moz-box-shadow:1px 1px 0 #eee !important;-o-box-shadow:1px 1px 0 #eee !important;box-shadow:1px 1px 0 #eee !important;outline:initial !important}.cleanslate button:active,.cleanslate button:active,.cleanslate input[type=button]:active,.cleanslate input[type=submit]:active{background:rgb(59,103,158) !important;background:-moz-linear-gradient(top, rgba(59,103,158,1) 0%, rgba(43,136,217,1) 50%, rgba(32,124,202,1) 51%, rgba(125,185,232,1) 100%) !important;background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(59,103,158,1)), color-stop(50%,rgba(43,136,217,1)), color-stop(51%,rgba(32,124,202,1)), color-stop(100%,rgba(125,185,232,1))) !important;background:-webkit-linear-gradient(top, rgba(59,103,158,1) 0%,rgba(43,136,217,1) 50%,rgba(32,124,202,1) 51%,rgba(125,185,232,1) 100%) !important;background:-o-linear-gradient(top, rgba(59,103,158,1) 0%,rgba(43,136,217,1) 50%,rgba(32,124,202,1) 51%,rgba(125,185,232,1) 100%) !important;background:-ms-linear-gradient(top, rgba(59,103,158,1) 0%,rgba(43,136,217,1) 50%,rgba(32,124,202,1) 51%,rgba(125,185,232,1) 100%) !important;background:linear-gradient(to bottom, rgba(59,103,158,1) 0%,rgba(43,136,217,1) 50%,rgba(32,124,202,1) 51%,rgba(125,185,232,1) 100%) !important;border-color:#5259b0 !important}.cleanslate button{padding:1px 6px 2px 6px !important;margin-right:5px !important}.cleanslate input[type=hidden]{display:none !important}.cleanslate textarea{-webkit-appearance:textarea !important;background:white !important;padding:2px !important;margin-left:4px !important;word-wrap:break-word !important;white-space:pre-wrap !important;font-size:11px !important;font-family:arial, helvetica, sans-serif !important;line-height:13px !important;resize:both !important}.cleanslate input,.cleanslate select,.cleanslate textarea{border:1px solid #ccc !important}.cleanslate select{font-size:11px !important;font-family:helvetica, arial, sans-serif !important;display:inline-block}.cleanslate input:focus,.cleanslate textarea:focus{outline:auto 5px -webkit-focus-ring-color !important;outline:initial !important}.cleanslate input[type=text]{background:white !important;padding:1px !important;font-family:initial !important;font-size:small !important}.cleanslate input[type=checkbox],.cleanslate input[type=radio]{border:1px #2b2b2b solid !important;border-radius:4px !important}.cleanslate input[type=checkbox],.cleanslate input[type=radio]{outline:initial !important}.cleanslate input[type=radio]{margin:2px 2px 3px 2px !important}.cleanslate abbr[title],.cleanslate acronym[title],.cleanslate dfn[title]{cursor:help !important;border-bottom-width:1px !important;border-bottom-style:dotted !important}.cleanslate ins{background-color:#ff9 !important;color:black !important}.cleanslate del{text-decoration:line-through !important}.cleanslate blockquote,.cleanslate q{quotes:none !important}.cleanslate blockquote:after,.cleanslate blockquote:before,.cleanslate li:after,.cleanslate li:before,.cleanslate q:after,.cleanslate q:before{content:"" !important}.cleanslate input,.cleanslate select{vertical-align:middle !important}.cleanslate table{border-collapse:collapse !important;border-spacing:0 !important}.cleanslate hr{display:block !important;height:1px !important;border:0 !important;border-top:1px solid #ccc !important;margin:1em 0 !important}.cleanslate *[dir=rtl]{direction:rtl !important}.cleanslate mark{background-color:#ff9 !important;color:black !important;font-style:italic !important;font-weight:bold !important}.cleanslate menu{padding-left:40px !important;padding-top:8px !important}.cleanslate [hidden],.cleanslate template{display:none !important}.cleanslate abbr[title]{border-bottom:1px dotted !important}.cleanslate sub,.cleanslate sup{font-size:75% !important;line-height:0 !important;position:relative !important;vertical-align:baseline !important}.cleanslate sup{top:-0.5em !important}.cleanslate sub{bottom:-0.25em !important}.cleanslate img{border:0 !important}.cleanslate figure{margin:0 !important}.cleanslate textarea{overflow:auto !important;vertical-align:top !important}.cleanslate{font-size:medium !important;line-height:1 !important;direction:ltr !important;text-align:left !important;text-align:start !important;font-family:"Times New Roman", Times, serif !important;color:black !important;font-style:normal !important;font-weight:normal !important;text-decoration:none !important;list-style-type:disc !important}.cleanslate pre{white-space:pre !important}
*:not(:root),:after:not(:root),:before:not(:root){-webkit-box-sizing:border-box !important;box-sizing:border-box !important}:after:not(:root),:before:not(:root){text-decoration:inherit !important;vertical-align:inherit !important}b:not(:root){font-weight:bolder !important}button:not(:root){margin:0 !important}button:not(:root){overflow:visible !important;text-transform:none !important}button:not(:root){-webkit-appearance:button !important}::-webkit-input-placeholder:not(:root){color:inherit !important;opacity:0.54 !important}::-moz-focus-inner:not(:root){border-style:none !important;padding:0 !important}:-moz-focusring:not(:root){outline:1px dotted ButtonText !important}button:not(:root){-ms-touch-action:manipulation !important;touch-action:manipulation !important}p:not(:root){margin:0 0 16px !important}button:not(:root){background-color:#007bff !important;border:#007bff !important;border-radius:4px !important;color:#fff !important;padding:8px 16px !important;display:inline-block !important;font-weight:400 !important;text-align:center !important;white-space:nowrap !important;vertical-align:middle !important;-webkit-user-select:none !important;-moz-user-select:none !important;-ms-user-select:none !important;user-select:none !important;border:1px solid rgba(0,0,0,0) !important;font-size:1rem !important;line-height:1.5 !important;-webkit-transition:color 0.15s ease-in-out,background-color 0.15s ease-in-out,border-color 0.15s ease-in-out,-webkit-box-shadow 0.15s ease-in-out !important;transition:color 0.15s ease-in-out,background-color 0.15s ease-in-out,border-color 0.15s ease-in-out,-webkit-box-shadow 0.15s ease-in-out !important;transition:color 0.15s ease-in-out,background-color 0.15s ease-in-out,border-color 0.15s ease-in-out,box-shadow 0.15s ease-in-out !important;transition:color 0.15s ease-in-out,background-color 0.15s ease-in-out,border-color 0.15s ease-in-out,box-shadow 0.15s ease-in-out,-webkit-box-shadow 0.15s ease-in-out !important}button::-moz-focus-inner:not(:root){padding:0 !important}button:hover:not(:root){background-color:#0069d9 !important;border-color:#0062cc !important;color:#fff !important}button:focus:not(:root){outline:0 !important;-webkit-box-shadow:0 0 0 0.2rem rgba(0,123,255,.5) !important;box-shadow:0 0 0 0.2rem rgba(0,123,255,.5) !important}button:disabled:not(:root){opacity:0.65 !important;cursor:not-allowed !important;background-color:#007bff !important;border-color:#007bff !important;color:#fff !important}
.box:not(:root){background:white !important;position:fixed !important;bottom:0 !important;left:0 !important;margin:1rem !important;padding:0.5rem !important;max-width:25rem !important;border:1px solid #333 !important;border-radius:4px !important;min-height:8rem !important;display:flex !important;flex-direction:column !important;width:calc(100% - 2rem) !important;box-sizing:border-box !important}</style><div class="box cleanslate" part="box"><p><b>Hello!</b> I like to see how much traffic my site is getting, so I collect some statistics. I don't track you, or collect any identifying information, but since you use Do Not Track, I figured I should ask before I collect anything.</p><div style="display: flex;justify-content: space-evenly;"><button class="nothanks" part="no-button">No Thanks</button> <button class="allow" part="yes-button">Allow</button></div></div>`
      let e = shadow.querySelector(`.box`);
      e.querySelector(`.nothanks`).addEventListener("click", () => {
        localStorage.setItem("overrideDNT", (overrideDNT = "1"));
        e.remove();
      });
      e.querySelector(`.allow`).addEventListener("click", () => {
        localStorage.setItem("overrideDNT", (overrideDNT = "0"));
        e.remove();
      });
    }
  }
  connectedCallback() {
    this._updateData();
  }
  disconnectedCallback() {
  }
  attributeChangedCallback(name, oldValue, newValue) {
    this._updateData();
  }
  _updateData() {
    let h=this.getAttribute("href");
    beaconURL = undefined;
    if (h) try {
      beaconURL = new URL(h).href;
    } catch(e) {}
    h=this.getAttribute("site");
    site = undefined;
    if (typeof h == "string" && h.length>0) try {
      site = h;
    } catch(e) {}
    site
  }
}
// Define the new element
customElements.define("stats-control", Stats);
export default event => {
  if (beaconURL&&((overrideDNT || navigator.doNotTrack) != "1"))
    navigator.sendBeacon(
      beaconURL,
      JSON.stringify({ event, site: site||"" })
    );
  }
